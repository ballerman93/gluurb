local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local coreGui = game:GetService("CoreGui")
local originalProps = {}
local toggled = false
local runLoop

local function storeOriginal(element)
    if element:IsA("GuiObject") and not originalProps[element] then
        originalProps[element] = {
            Position = element.Position,
            Size = element.Size,
            Rotation = element.Rotation
        }
    end
end

local function restoreElement(element)
    if element:IsA("GuiObject") then
        local original = originalProps[element]
        if original then
            element.Position = original.Position
            element.Size = original.Size
            element.Rotation = original.Rotation
        end
    end
end

local function tweakElement(element)
    if element:IsA("GuiObject") then
        local original = originalProps[element]
        if original then
            local offsetX = math.random(-1, 1)
            local offsetY = math.random(-1, 1)
            local sizeX = math.random(-1, 1)
            local sizeY = math.random(-1, 1)
            local rotationOffset = math.random(-3, 3)

            element.Position = original.Position + UDim2.new(0, offsetX, 0, offsetY)
            element.Size = original.Size + UDim2.new(0, sizeX, 0, sizeY)
            element.Rotation = original.Rotation + rotationOffset
        end
    end
end

local function scanGui(guiParent)
    for _, gui in pairs(guiParent:GetChildren()) do
        if gui:IsA("ScreenGui") then
            for _, element in pairs(gui:GetDescendants()) do
                storeOriginal(element)
            end
        end
    end
end

scanGui(playerGui)
scanGui(coreGui)

local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 200, 0, 70)
button.Position = UDim2.new(0.5, -100, 0.5, -35)
button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
button.BorderColor3 = Color3.fromRGB(0, 0, 0)
button.BorderSizePixel = 5
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Text = "shit yourself"
button.TextScaled = true
button.Active = true
button.Draggable = true
button.Parent = screenGui

button.MouseButton1Click:Connect(function()
    toggled = not toggled
    if toggled then
        runLoop = true
        spawn(function()
            while runLoop do
                for _, gui in pairs(playerGui:GetChildren()) do
                    if gui:IsA("ScreenGui") then
                        for _, element in pairs(gui:GetDescendants()) do
                            tweakElement(element)
                        end
                    end
                end
                for _, gui in pairs(coreGui:GetChildren()) do
                    for _, element in pairs(gui:GetDescendants()) do
                        tweakElement(element)
                    end
                end

                wait(0.05)
            end
        end)
    else
        runLoop = false
        for element, _ in pairs(originalProps) do
            restoreElement(element)
        end
    end
end)
